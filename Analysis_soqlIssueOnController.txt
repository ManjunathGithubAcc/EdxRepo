 public PageReference runSearch() {
    
    String prodName = Apexpages.currentPage().getParameters().get('ProductName');
       //Added : SF1 mobile Product Search    
        //if(prodName == null || prodName == ''){
            //prodName = prodSF1Name;
        //}
    //system.debug('@@ Search Product = '+prodName);   
     // ends: SF1 mobile Product Search    
    productWrap = new List<productSearchWrapper>();
    
    //Changes start by Bhuvaneshwari - PICO
     //changes by Bhuvaneshwari CR-00143285 
    /*if(opp.RecordTypeID == CBDRecordTypeId){
        String psocredit = 'PSO CREDITS';
        soql = 'Select Name,Id,Pricebook2Id,Product2Id, Product2.Family, Product2.Name, Product2.Product_Group__c, Product2.Division__c, Product2.Platform_Group__c, Product2.Product_Platform__c, Product2.Services__c, Product2.Hybrid_Cloud__c';
        soql += ' from PriceBookEntry where IsActive = true AND Product2.IsSFA_PRM_Product__c = true AND priceBook2.isStandard = false AND Product2.Product_Platform__c LIKE \'%' + psocredit  + '%\'' ; //fetch only pso credits on typing pso
        }
    //Changes end by Bhuvaneshwari - PICO
    */
     //changes end by Bhuvaneshwari-CR-00143285 
     //changes start by Bhuvaneshwari CR-00143285 
     if(opp.RecordTypeID == CBDRecordTypeId){
         if(prdPlatfrm!=null && !prdPlatfrm.isEmpty()){
        soql = 'Select Name,Id,Pricebook2Id,Product2Id, Product2.Family, Product2.Name, Product2.Product_Group__c, Product2.Division__c, Product2.Platform_Group__c, Product2.Product_Platform__c, Product2.Services__c, Product2.Hybrid_Cloud__c,Product2.Pipeline_Product_Group__c';
        soql += ' from PriceBookEntry where IsActive = true AND Product2.IsSFA_PRM_Product__c = true AND priceBook2.isStandard = false AND Product2.Product_Platform__c IN :prdPlatfrm ' ; 
        }
     }
        else{

    soql = 'Select Name,Id,Pricebook2Id,Product2Id, Product2.Family, Product2.Name, Product2.Product_Group__c, Product2.Division__c, Product2.Platform_Group__c, Product2.Product_Platform__c, Product2.Services__c, Product2.Hybrid_Cloud__c,Product2.Pipeline_Product_Group__c';
    soql += ' from PriceBookEntry where IsActive = true AND Product2.IsSFA_PRM_Product__c = true AND priceBook2.isStandard = false AND Product2.Product_Platform__c != null ';
     }
    //changes end by Bhuvaneshwari CR-00143285 
    SFA_PRM_Price_book_setting__c custompricebook = SFA_PRM_Price_book_setting__c.getInstance('SFA PRM Price Book');
    
    string iscode = ''+ opp.CurrencyISOCode;
    if (!prodName.equals('') && prodName.length() > 1){
      soql += 'AND CurrencyISOCode = \'' + iscode +'\'';
      soql += 'AND Pricebook2Id = \'' + custompricebook.Price_Book_Id__c +'\'';
      soql += ' AND ( Product2.Platform_Group__c like \'%' + String.escapeSingleQuotes(prodName)+  '%\' ';
      soql += ' OR Product2.Product_Group__c like \'%' + String.escapeSingleQuotes(prodName)+  '%\' ';
      soql += ' OR Product2.Division__c like \'%' + String.escapeSingleQuotes(prodName)+  '%\' ';
      soql += ' OR Product2.Product_Platform__c like \'%' + String.escapeSingleQuotes(prodName)+  '%\' ';
      soql += ')';
      soql += ' Order by Product2.Division__c Limit '+ SearchLimit;
      runQuery();
      selectedItem = SELECT_ONE;
      selectProdGrop = false;
      selectPlatform = false;
      productWrap2 = new List<productSearchWrapper>();
      productWrap3 = new List<productSearchWrapper>();  
    }else
        showhide = false;
    
    return null;
  }