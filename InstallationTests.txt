/* 
 * This class can be safely deleted from your org. 
 * It was only used to ensure 100% test coverage
 * for the managed package installation.
 */

@IsTest
public class InstallationTests 
{ 
    @testSetup
    static void setUpTheDummyProducts()
    {
        List<Product2> prodTestList = new List<Product2>();
        
        String extVal = '55d66226726b611100aaf741';
        
        for(Integer i = 0; i < 5; i++)
        {
            Product2 pr = new Product2();
            pr.Name = 'Test '+i;
            pr.Warehouse_SKU__c = (extVal + i);
            prodTestList.add(pr);
        }
        insert prodTestList;
    }
    
    public static testMethod void checkTheSch()
    {
        String CRON_EXP = '0 0 0 15 3 ? 2022';
        WarehouseSyncSchedule wss = new WarehouseSyncSchedule();
        
        Test.StartTest();
        ID jobID = System.schedule('TestContext', CRON_EXP, wss);
        Test.StopTest();
        
        List<Product2> prodsAfterUpdate = [SELECT Name, Warehouse_SKU__c, Current_Inventory__c FROM Product2];
        
        for(Product2 prodAfter: prodsAfterUpdate)
        {
            System.assertNotEquals(prodAfter.Name, 'Test');
            //System.assert(prodAfter.Current_Inventory__c != NULL );
        }
        
    }
    
    
}